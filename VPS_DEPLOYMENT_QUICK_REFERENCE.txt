╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║   🚀 DEPLOY SQLITE TO HOSTINGER VPS - QUICK REFERENCE       ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────┐
│  📋 PREREQUISITES                                             │
└───────────────────────────────────────────────────────────────┘

  ✓ SSH access to your VPS
  ✓ Node.js application running via PM2
  ✓ Current data in /var/www/yamaha/admin/data/*.json


┌───────────────────────────────────────────────────────────────┐
│  🎯 OPTION 1: AUTOMATED DEPLOYMENT (EASIEST!)                │
└───────────────────────────────────────────────────────────────┘

  From your Mac terminal:
  
    cd /Users/johnalcantara/Documents/yamaha
    ./deploy-to-vps.sh
  
  The script will:
    1. Upload all necessary files
    2. Create backup of current data
    3. Install sqlite3 package
    4. Run migration
    5. Switch to SQLite server
    6. Restart application
  
  ⏱️  Total time: ~5-10 minutes
  ⚡ Downtime: ~2-3 minutes


┌───────────────────────────────────────────────────────────────┐
│  🔧 OPTION 2: MANUAL DEPLOYMENT                              │
└───────────────────────────────────────────────────────────────┘

  Step 1: Upload files via SCP
  ────────────────────────────────────────────────────────────
  
    scp admin/data/database.js root@YOUR_VPS_IP:/var/www/yamaha/admin/data/
    scp admin/data/migrate-to-sqlite.js root@YOUR_VPS_IP:/var/www/yamaha/admin/data/
    scp server-sqlite.js root@YOUR_VPS_IP:/var/www/yamaha/
    scp db-query.sh root@YOUR_VPS_IP:/var/www/yamaha/
    scp switch-db.sh root@YOUR_VPS_IP:/var/www/yamaha/
    scp test-sqlite.sh root@YOUR_VPS_IP:/var/www/yamaha/
  
  
  Step 2: SSH into VPS
  ────────────────────────────────────────────────────────────
  
    ssh root@YOUR_VPS_IP
    cd /var/www/yamaha
  
  
  Step 3: Backup current data
  ────────────────────────────────────────────────────────────
  
    DATE=$(date +%Y%m%d_%H%M%S)
    mkdir -p /var/backups/yamaha-$DATE
    cp admin/data/*.json /var/backups/yamaha-$DATE/
  
  
  Step 4: Install sqlite3
  ────────────────────────────────────────────────────────────
  
    npm install sqlite3
  
  
  Step 5: Stop application
  ────────────────────────────────────────────────────────────
  
    pm2 stop yamaha-game
  
  
  Step 6: Run migration
  ────────────────────────────────────────────────────────────
  
    cd admin/data
    node migrate-to-sqlite.js
    cd ../..
  
  
  Step 7: Switch to SQLite server
  ────────────────────────────────────────────────────────────
  
    cp server.js server-json-backup.js
    cp server-sqlite.js server.js
  
  
  Step 8: Restart application
  ────────────────────────────────────────────────────────────
  
    pm2 restart yamaha-game
    pm2 save
  
  
  Step 9: Verify deployment
  ────────────────────────────────────────────────────────────
  
    ./test-sqlite.sh
    pm2 logs yamaha-game


┌───────────────────────────────────────────────────────────────┐
│  🧪 TESTING AFTER DEPLOYMENT                                 │
└───────────────────────────────────────────────────────────────┘

  On VPS:
  
    cd /var/www/yamaha
    ./test-sqlite.sh              # Run full test suite
    ./db-query.sh stats           # Check database stats
    pm2 logs yamaha-game          # View logs
    pm2 status                    # Check status
  
  In Browser:
  
    https://yourdomain.com        # Test game
    https://yourdomain.com/admin  # Test admin dashboard


┌───────────────────────────────────────────────────────────────┐
│  🔄 ROLLBACK (IF NEEDED)                                     │
└───────────────────────────────────────────────────────────────┘

  On VPS:
  
    pm2 stop yamaha-game
    cp server-json-backup.js server.js
    pm2 restart yamaha-game
  
  Your JSON files are safe in:
    - /var/backups/yamaha-TIMESTAMP/
    - /var/www/yamaha/admin/data/json-backup/


┌───────────────────────────────────────────────────────────────┐
│  📊 POST-DEPLOYMENT MONITORING                               │
└───────────────────────────────────────────────────────────────┘

  Check application logs:
    pm2 logs yamaha-game --lines 100
  
  Monitor in real-time:
    pm2 monit
  
  View database stats:
    ./db-query.sh stats
  
  View leaderboard:
    ./db-query.sh leaderboard 10
  
  Create manual backup:
    ./db-query.sh backup


┌───────────────────────────────────────────────────────────────┐
│  🛠️  TROUBLESHOOTING                                         │
└───────────────────────────────────────────────────────────────┘

  Database locked error:
    pm2 restart yamaha-game
  
  Permission issues:
    sudo chown -R www-data:www-data /var/www/yamaha/admin/data/
    sudo chmod 664 /var/www/yamaha/admin/data/yamaha.db
  
  Server won't start:
    pm2 logs yamaha-game --err
    npm install sqlite3
  
  Missing database file:
    cd /var/www/yamaha/admin/data
    node migrate-to-sqlite.js


┌───────────────────────────────────────────────────────────────┐
│  📚 DOCUMENTATION                                            │
└───────────────────────────────────────────────────────────────┘

  Full deployment guide:
    HOSTINGER_SQLITE_DEPLOYMENT.md
  
  Quick start:
    QUICKSTART_SQLITE.md
  
  Database guide:
    DATABASE_README.md
  
  Original VPS setup:
    HOSTINGER_VPS_DEPLOYMENT.md


┌───────────────────────────────────────────────────────────────┐
│  ✅ SUCCESS CHECKLIST                                        │
└───────────────────────────────────────────────────────────────┘

  After deployment, verify:
  
  [ ] Files uploaded to VPS
  [ ] sqlite3 package installed
  [ ] Backup created
  [ ] Migration completed successfully
  [ ] Server switched to SQLite
  [ ] Application restarted
  [ ] Game works in browser
  [ ] Admin dashboard accessible
  [ ] Analytics displaying correctly
  [ ] Leaderboard showing data
  [ ] No errors in pm2 logs


┌───────────────────────────────────────────────────────────────┐
│  🎯 KEY BENEFITS                                             │
└───────────────────────────────────────────────────────────────┘

  ✅ 3x faster query performance
  ✅ Better reliability (no JSON corruption)
  ✅ Advanced analytics with SQL
  ✅ Better concurrent user support
  ✅ ACID-compliant transactions
  ✅ Easy backup and maintenance


╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║  📞 QUICK HELP                                               ║
║                                                               ║
║  Automated:  ./deploy-to-vps.sh                             ║
║  Manual:     See HOSTINGER_SQLITE_DEPLOYMENT.md             ║
║  Support:    pm2 logs yamaha-game                           ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
